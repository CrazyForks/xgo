# Cause of `error not instrumented by xgo`
When mock setup fails:
```go
package main

import "third.party/pkg"

func TestThirdPackage(t *testing.T){
    mock.Patch(pkg.DoSomething, func() string{
        return "mock"
    })
}
```

With the following msg:
```
func not instrumented by xgo,...
```

It means there is not trap point inserted by xgo, either because the package is not in main module, or there is some inherent limitation.

# How to solve?
By default xgo will only insert trap for packages of main module, which is resolved by `go list ./...`.

Packages not trapped by xgo cannot be mocked, the setup naturally fails.

To add extra packages for trapping, you can specify `--trap pkg`:
```sh
xgo test --trap third.party/pkg <remaining args...>
```

To add more packages, repeat this option multiple times.

You can also specify `--trap third.part/...` to trap for all packages under `third.part`, including itself.

# Limitations on stdlib
Due to performance and security reason, xgo by default only trap a very small portions [runtime/mock/STDLIB.md](../runtime/mock/STDLIB.md).

Like:
```
# time
Now()
Sleep()

# os/exec
(*Cmd).Run()
(*Cmd).Output()

# net/http
Get()
...
```

If there is some stdlib function not instrumented by xgo, and you really need it,you can leave a comment in [Issue#6](https://github.com/xhd2015/xgo/issues/6).

# Limitations on generic functions and methods in Go 1.18 and Go 1.19
`xgo` cannot instrument generic functions and methods in go1.18 and go1.19, since in this two early version which support generic, the implementation is very hack: go implements generic in closure, which is implicitly generated by the compiler at each place that generic instance is referenced.

Since `xgo v1.1.0` drops support for closure, generic implemented such way is no longer supported.

However, later and latest go version works fine.